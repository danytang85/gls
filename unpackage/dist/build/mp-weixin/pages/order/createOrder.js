(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"055f":function(t,e,a){"use strict";(function(t){a("8ad5"),a("921b");n(a("66fd"));var e=n(a("51a6"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},4829:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(a("0e8f"));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){return a.e("components/uni-number-box").then(a.bind(null,"0bb4"))},s={components:{uniNumberBox:i},data:function(){return{server:this.apiServer,logo:this.apiServer+"/img/gls_logo.png",psid:0,maskState:0,desc:"",payType:1,cartList:[],freight:0,total:0,addressData:{}}},onLoad:function(e){var a=this,o={url:"/addressApi/getdefaultaddress/",method:"post"},i={};if(n.default.httpTokenRequest(o,i).then(function(e){0==e.data["code"]?a.addressData=e.data["defaultaddress"]:t.showToast({title:e.data.msg,icon:"none"})},function(t){console.log(t)}),void 0!=e.psid){this.psid=e.psid;var s={url:"/productApi/createorderbypsid/",method:"post"},r={psid:e.psid};n.default.httpTokenRequest(s,r).then(function(e){if(0==e.data["code"]){var n=e.data["cartList"],o=n.map(function(t){return t});a.cartList=o,a.calcTotal()}else t.showToast({title:e.data.msg,icon:"none"})},function(t){console.log(t)})}if(void 0!=e.data){var u=JSON.parse(e.data),c={url:"/productApi/getcartlist/",method:"post"},d=u;n.default.httpTokenRequest(c,d).then(function(e){if(0==e.data["code"]){var n=e.data["cartList"],o=n.map(function(t){return t});a.cartList=o,a.calcTotal()}else t.showToast({title:e.data.msg,icon:"none"})},function(t){console.log(t)})}},methods:{toggleMask:function(t){var e=this,a="show"===t?10:300,n="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=n},a)},numberChange:function(t){this.cartList[t.index].number=t.number,this.calcTotal()},changePayType:function(t){this.payType=t},submit:function(){if(0!=this.cartList.length)if(""!=this.addressData){t.showLoading({title:"创建订单中"});var e=JSON.stringify(this.cartList),a={url:"/orderApi/createorder/",method:"post"},o={remark:this.desc,cartliststr:e,addressData:JSON.stringify(this.addressData),total_fee:this.total,freight_fee:this.freight};n.default.httpTokenRequest(a,o).then(function(e){0==e.data["code"]?t.redirectTo({url:"/pages/money/pay?oid="+e.data["oid"]}):(setTimeout(function(){t.hideLoading()},2e3),t.showToast({title:e.data.msg,icon:"none"}))},function(t){console.log(t)})}else this.$api.msg("请提交收货地址");else this.$api.msg("产品为空，无法提交")},calcTotal:function(){var t=this.cartList;if(0!==t.length){var e=0;t.forEach(function(t){e+=t.price*t.number}),this.total=Number(e.toFixed(2))}else this.empty=!0},stopPrevent:function(){}}};e.default=s}).call(this,a("543d")["default"])},"51a6":function(t,e,a){"use strict";a.r(e);var n=a("7362"),o=a("5b59");for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);a("78a6");var s=a("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"5b59":function(t,e,a){"use strict";a.r(e);var n=a("4829"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=o.a},7362:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"78a6":function(t,e,a){"use strict";var n=a("e36e"),o=a.n(n);o.a},e36e:function(t,e,a){}},[["055f","common/runtime","common/vendor"]]]);