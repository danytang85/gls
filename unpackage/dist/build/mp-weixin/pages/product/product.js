(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"0a14":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},"1aed":function(t,e,n){"use strict";n.r(e);var o=n("0a14"),a=n("f65d");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("808e");var s=n("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},"727e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),a=i(n("0e8f"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,a,i,s){try{var r=t[i](s),u=r.value}catch(c){return void n(c)}r.done?e(u):Promise.resolve(u).then(o,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function r(t){s(i,o,a,r,u,"next",t)}function u(t){s(i,o,a,r,u,"throw",t)}r(void 0)})}}var u=function(){return n.e("components/share").then(n.bind(null,"fdd0"))},c={components:{share:u},data:function(){return{cartcount:0,server:this.apiServer,specClass:"none",specSelected:[],favorite:!1,shareList:[],pinfo:[],thumblist:[],desc:"",sharedata:[],isnotupgrade:!1,shareInvitation:!1,invitation:"",sharetitle:"良吉康-最火的社交新零售商城！",shareimg:"/img/banner2.jpg"}},onLoad:function(){var e=r(o.default.mark(function e(n){var i,s,r,u=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=n.psid,s={url:"/productApi/getproductinfo/",method:"post"},r={psid:i},a.default.httpTokenRequest(s,r).then(function(e){0==e.data["code"]?(u.isnotupgrade=1!=e.data["pinfo"].upgrade,u.pinfo=e.data["pinfo"],u.thumblist=e.data["thumblist"],u.desc=u.pinfo["content"],u.favorite=e.data["isfav"],u.cartcount=e.data["cartcount"],u.sharedata={title:e.data["pinfo"].title,img:e.data["pinfo"].images}):t.showToast({title:e.data.msg,icon:"none"})},function(t){console.log(t)}),e.next=6,this.$api.json("shareList");case 6:this.shareList=e.sent;case 7:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),onShareAppMessage:function(t){var e=this,n={title:e.pinfo.title,path:"/pages/person/share?vcode="+e.invitation+"&backurl="+encodeURIComponent("/pages/product/product?psid="+e.pinfo.psid),imageUrl:e.apiServer+e.pinfo.images,success:function(t){console.log(t.errMsg),"shareAppMessage:ok"==t.errMsg&&(console.log("分享成功"),e.hideModal())},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg},complete:function(){}};return n},methods:{hideModal:function(t){this.shareInvitation=!1},getinvitation:function(){var t=this,e={url:"/base/getinvitation/",method:"post"},n={};a.default.httpTokenRequest(e,n).then(function(e){0==e.data["code"]?(t.shareInvitation=!0,t.invitation=e.data["invitation"],t.shareimg=e.data["shareimg"],t.sharetitle=e.data["sharetitle"]):t.$api.msg(e.data.msg)},function(t){console.log(t)})},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){var e=this,n={url:"/productApi/toFavorite/",method:"post"},o={psid:this.pinfo["psid"]};a.default.httpTokenRequest(n,o).then(function(n){0==n.data["code"]?e.favorite=n.data["isfav"]:t.showToast({title:n.data.msg,icon:"none"})},function(t){console.log(t)})},buy:function(){var e=this,n={url:"/productapi/issaleproduct/",method:"post"},o={psid:this.pinfo["psid"]};a.default.httpTokenRequest(n,o).then(function(n){0==n.data["code"]?t.navigateTo({url:"/pages/order/createOrder?psid=".concat(e.pinfo.psid)}):t.showToast({title:n.data.msg,icon:"none"})},function(t){console.log(t)})},toChart:function(){t.navigateTo({url:"/pages/cart/home"})},addcart:function(){var e=this,n={url:"/productApi/addcart/",method:"post"},o={psid:this.pinfo["psid"]};a.default.httpTokenRequest(n,o).then(function(n){0==n.data["code"]?(e.cartcount=n.data["cartcount"],t.showToast({title:"成功加入购物车",icon:"none"})):t.showToast({title:n.data.msg,icon:"none"})},function(t){console.log(t)})},stopPrevent:function(){}}};e.default=c}).call(this,n("543d")["default"])},"72db":function(t,e,n){},"808e":function(t,e,n){"use strict";var o=n("72db"),a=n.n(o);a.a},c251:function(t,e,n){"use strict";(function(t){n("8ad5"),n("921b");o(n("66fd"));var e=o(n("1aed"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f65d:function(t,e,n){"use strict";n.r(e);var o=n("727e"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a}},[["c251","common/runtime","common/vendor"]]]);