(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/person/logon"],{32:
/*!************************************************************************************!*\
  !*** /Users/danytang/web/gls/www/glsapp/main.js?{"page":"pages%2Fperson%2Flogon"} ***!
  \************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){t(/*! uni-pages */4),t(/*! @dcloudio/uni-stat */5);n(t(/*! vue */2));function n(e){return e&&e.__esModule?e:{default:e}}e(n(t(/*! ./pages/person/logon.vue */33)).default)}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},33:
/*!*****************************************************************!*\
  !*** /Users/danytang/web/gls/www/glsapp/pages/person/logon.vue ***!
  \*****************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! ./logon.vue?vue&type=template&id=77265650& */34),i=t(/*! ./logon.vue?vue&type=script&lang=js& */36);for(var s in i)"default"!==s&&function(e){t.d(n,e,function(){return i[e]})}(s);t(/*! ./logon.vue?vue&type=style&index=0&lang=css& */42);var a=t(/*! ../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),r=Object(a.default)(i.default,o.render,o.staticRenderFns,!1,null,null,null,!1,o.components,void 0);r.options.__file="Users/danytang/web/gls/www/glsapp/pages/person/logon.vue",n.default=r.exports},34:
/*!************************************************************************************************!*\
  !*** /Users/danytang/web/gls/www/glsapp/pages/person/logon.vue?vue&type=template&id=77265650& ***!
  \************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logon.vue?vue&type=template&id=77265650& */35);t.d(n,"render",function(){return o.render}),t.d(n,"staticRenderFns",function(){return o.staticRenderFns}),t.d(n,"recyclableRender",function(){return o.recyclableRender}),t.d(n,"components",function(){return o.components})},35:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/danytang/web/gls/www/glsapp/pages/person/logon.vue?vue&type=template&id=77265650& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n),t.d(n,"render",function(){return o}),t.d(n,"staticRenderFns",function(){return s}),t.d(n,"recyclableRender",function(){return i}),t.d(n,"components",function(){});var o=function(){var e=this.$createElement;this._self._c},i=!1,s=[];o._withStripped=!0},36:
/*!******************************************************************************************!*\
  !*** /Users/danytang/web/gls/www/glsapp/pages/person/logon.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logon.vue?vue&type=script&lang=js& */37),i=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);n.default=i.a},37:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/danytang/web/gls/www/glsapp/pages/person/logon.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t(/*! @/js_sdk/ccdzhang-dokey/md5.js */38)),s=r(t(/*! @/components/utils/http.js */13)),a=t(/*! vuex */12);function r(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u={components:{},data:function(){return{backpage:"../index/home",loginMode:1,usernameType:"text",codeBut:"获取验证码",codeClick:!0,mobile:"",password:"",code:"",SessionKey:"",OpenId:"",nickName:null,avatarUrl:null,bindmobile:!1,Code:"",userinfo:[],vcode:""}},computed:(0,a.mapState)(["uerInfo","hasLogin"]),methods:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){c(e,n,t[n])})}return e}({},(0,a.mapMutations)(["login"]),{showModal:function(){this.bindmobile=!0},hideModal:function(e){this.bindmobile=!1},loginCode:function(){this.loginMode=2},loginmobile:function(){this.loginMode=1},mobileInput:function(e){this.mobile=e.detail.value},passwordInpur:function(e){this.password=e.detail.value},codeInput:function(e){this.code=e.detail.value},getCode:function(){if(this.codeClick){if(1!=this.mobile[0]||11!=this.mobile.length)return void this.$api.msg("请输入正确的手机号");this.codeClick=!1,this._sendmsm(this.mobile)}},loginUp:function(){if(""!=this.mobile)if(/(^1[3|4|5|7|8][0-9]{9}$)/.test(this.mobile))if(""!=this.password||1!=this.loginMode)if(""!=this.code||2!=this.loginMode){var e={loginmode:this.loginMode,mobile:this.mobile,password:(0,i.default)((0,i.default)(this.password)),code:this.code,vcode:this.vcode};this._logonrequest(e)}else this.$api.msg("请输入验证码");else this.$api.msg("请输入密码");else this.$api.msg("手机号码格式不正确");else this.$api.msg("请输入手机号码")},_logonrequest:function(n){var t=this,o=n;s.default.httpRequest({url:"/userApi/logon/",method:"post"},o).then(function(n){0==n.data.code?(t.login(n.data.token),e.navigateTo({url:t.backpage})):t.$api.msg(n.data.msg)},function(e){console.log(e)})},_sendmsm:function(n){var t=this,o=this,i={mobile:n,sendtype:"logon"};s.default.httpRequest({url:"/CommonApi/sendmsm/",method:"post"},i).then(function(e){if(0==e.data.code)var n=60,i=setInterval(function(){o.codeBut="重新发送"+n,--n<=0&&(o.codeBut="重新发送",o.codeClick=!0,clearInterval(i))},1e3);else t.$api.msg(e.data.msg)},function(n){console.log(n),e.showModal({content:err.errMsg,showCancel:!1})},function(e){t.loading=!1})},getPhoneNumberHander:function(e){var n=this;console.log("e",e);var t=this;if("getPhoneNumber:fail user deny"==e.detail.errMsg)wx.showModal({title:"提示",showCancel:!1,content:"未授权您将无法登陆",success:function(e){}});else{var o={encryptedData:e.detail.encryptedData,iv:e.detail.iv,session_key:this.SessionKey};s.default.httpRequest({url:"/CommonApi/getphone/",method:"post"},o).then(function(e){0==e.data.code?(t.weixinreg(e.data.phone),console.log(e.data)):n.$api.msg(e.data.msg)},function(e){console.log(e)})}},weixinreg:function(n){var t=this,o=this,i={mobile:n,wxopenid:this.OpenId,nickname:this.userinfo.nickName,province:this.userinfo.province,city:this.userinfo.city,country:this.userinfo.country,gender:this.userinfo.gender,vcode:o.vcode};s.default.httpRequest({url:"/UserApi/wxreg/",method:"post"},i).then(function(n){0==n.data.code?""!=n.data.token&&(o.login(n.data.token),e.navigateTo({url:o.backpage})):t.$api.msg(n.data.msg)},function(e){console.log(e)})},weixinlogin:function(){var n=this;e.showLoading({title:"登录中..."}),e.getProvider({service:"oauth",success:function(t){~t.provider.indexOf("weixin")&&e.login({provider:"weixin",success:function(t){var o=this,i=t.code;console.log(t),e.getUserInfo({provider:"weixin",success:function(e){console.log(e.userInfo);var t=e.userInfo;n.userinfo=t}});var a={code:i};n.Code=i,s.default.httpRequest({url:"/CommonApi/getwxopenid/",method:"post"},a).then(function(t){if(0==t.data.code){if(""!=t.data.token)n.login(t.data.token),e.navigateTo({url:n.backpage});else{var i=t.data.data.session_key,s=t.data.data.openid;n.OpenId=s,n.SessionKey=i,n.showModal()}e.hideLoading()}else o.$api.msg(t.data.msg)},function(e){console.log(e)})}})}})}}),onLoad:function(n){o.islogon()&&e.redirectTo({url:"../person/home"}),null!=n.backpage&&(this.backpage=n.backpage);try{var t=e.getStorageSync("vcode");t&&(this.vcode=t)}catch(e){}}};n.default=u}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default,t(/*! ./../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/webpack/buildin/global.js */3))},42:
/*!**************************************************************************************************!*\
  !*** /Users/danytang/web/gls/www/glsapp/pages/person/logon.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logon.vue?vue&type=style&index=0&lang=css& */43),i=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);n.default=i.a},43:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/danytang/web/gls/www/glsapp/pages/person/logon.vue?vue&type=style&index=0&lang=css& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){}},[[32,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/person/logon.js.map